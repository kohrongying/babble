<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="description"><meta name="keyword"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Building a Single-Spa</title><link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon"><link href="/styles/site.css" rel="stylesheet"><meta name="generator" content="Hexo 4.2.1"></head><body><header class="container" id="header"><div class="header"><div class="header-left"><div class="avatar"><img src="/images/avatar.jpeg"></div><div class="author"><div class="author-name"><a href="/">rongying</a></div><div class="about-me">just a plebeian</div></div></div><div class="header-right"><ul class="navigation"><li><a href="archives">Archives</a></li></ul></div><div class="about-me-mask"><div class="about-me-wrap"><div class="about-me__header"><div class="avatar"><img src="/images/avatar.jpeg"></div></div><ul class="socials"><li class="social-item"><span class="label"><img src="/images/socials/github.svg" alt="https://github.com/kohrongying"></span><a href="https://github.com/kohrongying" target="_blank" title="https://github.com/kohrongying">https://github.com/kohrongying</a></li><li class="social-item"><span class="label"><img src="/images/socials/email.svg" alt="kohrongying@gmail.com"></span><span>kohrongying@gmail.com</span></li></ul></div></div></div></header><div class="container post"><section class="article"><div class="title">Building a Single-Spa</div><div class="date">2020-06-30</div><div class="content"><p>I came across the single-spa project while looking for how to build microfrontends. I first heard of microfrontends from ThoughtWorks Tech Radar <a id="more"></a>and I was intrigued by an <a href="https://martinfowler.com/articles/micro-frontends.html" target="_blank" rel="noopener">article</a> on Martin Fowler’s website as well. So I wanted my hand at trying it out.</p>
<h2 id="Microfrontends"><a href="#Microfrontends" class="headerlink" title="Microfrontends"></a>Microfrontends</h2><p>So I won’t go into <em>why</em> microfrontends, I believe there are many articles out there that write about it. I do believe in its value and that this value differs based on the scale and requirements of the project. </p>
<p>So, <a href="https://single-spa.js.org/" target="_blank" rel="noopener">single-spa</a> is a framework that helps you build multiple frameworks (React/ Angular/ Vue/ Svelte etc) in one single project. Of course you can deploy each framework separately and achieve your microfrontend there.</p>
<h2 id="Project-setup"><a href="#Project-setup" class="headerlink" title="Project setup"></a>Project setup</h2><p>For my set up, I decided to try a React x Svelte project. I mainly followed this <a href="https://dev.to/dabit3/building-micro-frontends-with-react-vue-and-single-spa-52op" target="_blank" rel="noopener">tutorial</a>. The only hiccup I faced was integrating Svelte. </p>
<p>Besides the Svelte single-spa package, I also had to install the <a href="https://github.com/sveltejs/svelte-loader" target="_blank" rel="noopener">svelte-loader</a> for webpack in order to compile the Svelte code. </p>
<h2 id="Project-Structure"><a href="#Project-Structure" class="headerlink" title="Project Structure"></a>Project Structure</h2><p>My structure follows such:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">|- single-spa.config.js</span><br><span class="line">|- webpack.config.js</span><br><span class="line">|- index.html</span><br><span class="line">|- index.css</span><br><span class="line">|- .babelrc</span><br><span class="line">|- package.json</span><br><span class="line">|- src</span><br><span class="line">    |- react</span><br><span class="line">        |- main.app.js</span><br><span class="line">        |- root.component.js</span><br><span class="line">    |- svelte</span><br><span class="line">        |- main.app.js</span><br><span class="line">        |- App.svelte</span><br><span class="line">    |- shared</span><br><span class="line">|- dist</span><br></pre></td></tr></table></figure>

<p>The <code>single-spa.config.js</code> is surprisingly straightforward to read.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; registerApplication, start &#125; <span class="keyword">from</span> <span class="string">'single-spa'</span></span><br><span class="line"></span><br><span class="line">registerApplication(</span><br><span class="line">  <span class="string">'svelte'</span>, </span><br><span class="line">  () =&gt; <span class="keyword">import</span>(<span class="string">'./src/svelte/main.app.js'</span>),</span><br><span class="line">  () =&gt; location.pathname === <span class="string">"/svelte"</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">registerApplication(</span><br><span class="line">  <span class="string">'react'</span>,</span><br><span class="line">  () =&gt; <span class="keyword">import</span>(<span class="string">'./src/react/main.app.js'</span>),</span><br><span class="line">  () =&gt; location.pathname === <span class="string">"/"</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">start();</span><br></pre></td></tr></table></figure>

<p>Here, it tells you to render different files based on the url. And in each framework’s <code>main.app.js</code> file, it is important to denote the rootComponent, domElementGetter (which is what you specify in the index.html) and also export the bootstrap, mount and unmount methods.</p>
<p>It is pretty cool.</p>
<h2 id="I-also-tried-out-Figma"><a href="#I-also-tried-out-Figma" class="headerlink" title="I also tried out Figma"></a>I also tried out Figma</h2><p>Their free tier is good enough for a hobbyist with up to 2 collaborators and unlimited projects. I like that I don’t have to download a package and everything is saved on the cloud. The controls are sleek and UX is pretty smooth.</p>
<p>I miss the Adobe XD copy and drag function, which I felt was lacking.. I had to copy and paste multple same elements, not sure if there is a shortcut for that? </p>
<p>But in all, it is a pretty impressive tool! </p>
<h2 id="The-end"><a href="#The-end" class="headerlink" title="The end."></a>The end.</h2><p>You can find my code in my <a href="https://github.com/kohrongying/weather-spa" target="_blank" rel="noopener">repo</a> or try out the <a href="https://weathersg.netlify.app/" target="_blank" rel="noopener">WeatherSG SPA</a></p>
</div><div class="tags"><a class="tag-link" href="/tags/figma/" rel="tag">figma</a><a class="tag-link" href="/tags/react/" rel="tag">react</a><a class="tag-link" href="/tags/single-spa/" rel="tag">single-spa</a><a class="tag-link" href="/tags/svelte/" rel="tag">svelte</a></div></section></div><div class="container"><ul class="nav"><li>Previous one:<a href="/2020/06/26/Revisiting-Go/">Revisiting Go</a></li></ul></div><div id="backToTop"><div class="back-arrow back-arrow-left"></div><div class="back-arrow back-arrow-right"></div></div><footer class="container"><div class="rights"><span>Powered by </span><a href="http://hexo.io" target="_blank">Hexo</a><span>, Theme </span><a href="https://github.com/gary-Shen/hexo-theme-curry" target="_blank">Curry</a><span>.</span></div></footer>
<script src="/script/jquery.min.js"></script>

<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

<script src="/fancybox/jquery.fancybox.pack.js"></script>

<script src="/script/index.js"></script>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-109820124-3', 'auto');
ga('send', 'pageview');</script>
<script src="/script/jquery.min.js"></script>

<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

<script src="/fancybox/jquery.fancybox.pack.js"></script>

<script src="/script/index.js"></script>

<script src="/script/post.js"></script>
</body></html>