<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="description"><meta name="keyword"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Da Nang</title><link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon"><link href="/styles/site.css" rel="stylesheet"><meta name="generator" content="Hexo 4.2.1"></head><body><header class="container" id="header"><div class="header"><div class="header-left"><div class="avatar"><img src="/images/avatar.jpeg"></div><div class="author"><div class="author-name"><a href="/">rongying</a></div><div class="about-me">just a plebeian</div></div></div><div class="header-right"><ul class="navigation"><li><a href="archives">Archives</a></li></ul></div><div class="about-me-mask"><div class="about-me-wrap"><div class="about-me__header"><div class="avatar"><img src="/images/avatar.jpeg"></div></div><ul class="socials"><li class="social-item"><span class="label"><img src="/images/socials/github.svg" alt="https://github.com/kohrongying"></span><a href="https://github.com/kohrongying" target="_blank" title="https://github.com/kohrongying">https://github.com/kohrongying</a></li><li class="social-item"><span class="label"><img src="/images/socials/email.svg" alt="kohrongying@gmail.com"></span><span>kohrongying@gmail.com</span></li></ul></div></div></div></header><div class="container post"><section class="article"><div class="title">Da Nang</div><div class="date">2018-05-20</div><div class="content"><p>Hello, it took nearly 5 months to get the first post of the year out. So just some updates, <a id="more"></a>ended SUTD end of April 2018 and immediately went on a trip to Vietnam with SUTD friends! We took advantage of the mayday weekend and went to Da Nang for a 5 day trip :) While on the trip, bosses at work were sharing an <a href="https://www.nytimes.com/interactive/2018/04/30/us/detroit-come-back-budget.html" target="_blank" rel="noopener">NY article</a> and saying how interactive it was. So, I decided to see if I could build one from scratch as well!</p>
<p>So yes. Tldr, I did. See some of my photos and the final outcome <a href="https://kohrongying.github.io/danang" target="_blank" rel="noopener">here</a>!</p>
<img src="/2018/05/20/2018-5-da-nang/006.jpg" class="" title="demo image">
<h3 id="HTML-Markup"><a href="#HTML-Markup" class="headerlink" title="HTML Markup"></a>HTML Markup</h3><p>So basically, the image will be fixed while text is scrollable. What I had in mind was a single 100% width and height section per image and caption and within that section, two <div>s, each 50% width. This was the HTML markup.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"page"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"page__image"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"page__text"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"page__text--group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>bana hills<span class="tag">&lt;/<span class="name">h1</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>a resort on a hill that was named after banana trees.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>I tried to follow <a href="http://getbem.com/" target="_blank" rel="noopener">BEM</a> standards, using <code>page</code> as my block, <code>page__image</code> and <code>page__text</code> as my elements and lastly, <code>page__text--group</code> as a modifier (not really modifying but it was cool as an identifier).</p>
<h3 id="Styles"><a href="#Styles" class="headerlink" title="Styles"></a>Styles</h3><p>For styles, it was kind of tricky at first. The key was giving the image a position of <code>fixed</code> and giving the text the position of <code>absolute</code>. The fixed position property will keep the image fixed as you scroll. However, without setting <code>opacity: 0</code> you will realise that you can only see the uppermost image. Also, without setting <code>top: 0</code>, you will realise you can only see the first image.</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">section</span><span class="selector-class">.page</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line"></span><br><span class="line">    .page__image &#123;</span><br><span class="line">        <span class="selector-tag">left</span>: 0;</span><br><span class="line">        <span class="selector-tag">top</span>: 0;</span><br><span class="line">        <span class="selector-tag">width</span>: 50%;</span><br><span class="line">        <span class="selector-tag">background-size</span>: <span class="selector-tag">cover</span>;</span><br><span class="line">        <span class="selector-tag">background-position</span>: <span class="selector-tag">center</span>;</span><br><span class="line">        <span class="selector-tag">height</span>: 100<span class="selector-tag">vh</span>;</span><br><span class="line">        <span class="selector-tag">position</span>: <span class="selector-tag">fixed</span>;</span><br><span class="line">        <span class="selector-tag">opacity</span>: 0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.page__text</span> &#123;</span><br><span class="line">        <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">        <span class="attribute">position</span>: absolute;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">align-items</span>: center;</span><br><span class="line">        <span class="attribute">justify-content</span>: center;    </span><br><span class="line">        <span class="attribute">flex-direction</span>: column;</span><br><span class="line"></span><br><span class="line">        .page__text--group &#123;</span><br><span class="line">            <span class="selector-tag">width</span>: 60%;</span><br><span class="line">            <span class="selector-tag">word-wrap</span>: <span class="selector-tag">break-word</span>;</span><br><span class="line">            <span class="selector-tag">text-align</span>: <span class="selector-tag">center</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Images are loaded as background images. Instead of manually setting the images, I use a for loop in scss! Quite fun, although you still have to manually set the maximum number of images and also ensure the naming of your images is standardized.</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@for</span> <span class="variable">$i</span> from <span class="number">0</span> through <span class="number">7</span> &#123;</span><br><span class="line">    <span class="selector-class">.page</span><span class="selector-attr">[data-page="#&#123;$i&#125;"]</span> &#123;</span><br><span class="line">        <span class="selector-class">.page__image</span> &#123;</span><br><span class="line">            <span class="attribute">background-image</span>: url(<span class="string">"../img/img#&#123;$i&#125;-small.jpg"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Javascript"><a href="#Javascript" class="headerlink" title="Javascript"></a>Javascript</h3><p>Alright, I use jQuery to help decide which page is active and which is not. I first create an array of all my pages. I keep track of the current page and what comes before and after it.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> slides = []</span><br><span class="line"><span class="keyword">const</span> PAGES = $(<span class="string">'.page'</span>);</span><br><span class="line">PAGES.each(<span class="function"><span class="keyword">function</span>(<span class="params">index, value</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.setAttribute(<span class="string">'data-page'</span>, index);</span><br><span class="line">    <span class="keyword">if</span> (index==<span class="number">0</span>) &#123;</span><br><span class="line">        slides.push(&#123;</span><br><span class="line">            current: <span class="keyword">this</span>,</span><br><span class="line">            prev: PAGES[PAGES.length<span class="number">-1</span>],</span><br><span class="line">            next: PAGES[<span class="number">1</span>]</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (index==PAGES.length<span class="number">-1</span>) &#123;</span><br><span class="line">        slides.push(&#123;</span><br><span class="line">            current: <span class="keyword">this</span>,</span><br><span class="line">            prev: PAGES[PAGES.length<span class="number">-2</span>],</span><br><span class="line">            next: PAGES[<span class="number">0</span>]</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        slides.push(&#123;</span><br><span class="line">            current: <span class="keyword">this</span>,</span><br><span class="line">            prev: PAGES[index<span class="number">-1</span>],</span><br><span class="line">            next: PAGES[index+<span class="number">1</span>]</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Then using the <code>$(window).scroll</code> event handler, we bind a function to it that calculates the pageYOffset (how far down the user has scrolled). I define a variable called <code>page_progress</code> which is the page offset divided by the height of the window. If the rounded number is larger than the current number of pages travelled, I increment number of pages travelled and fadeIn the new image so the the new image has an opacity of 1 and overlaps the previous images. So the logic is that we don’t remove the images, imagine the images all stacked on each other (because they have the same fixed position due to <code>left: 0 top: 0;</code>) and they are all transparent <code>(opacity: 0)</code>. When I’ve scrolled past a certain limit, they become opaque. Image 1 is at the bottom, then Image 2 is stacked on it, meaning the last Image is right at the top of the stack. (On hindsight, is it a stack implementation?) Somewhat haha.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> height = $(<span class="built_in">window</span>).height();</span><br><span class="line"><span class="keyword">let</span> num_pages_travelled = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> max_pages = $(<span class="string">'.page'</span>).length - <span class="number">1</span>; </span><br><span class="line"></span><br><span class="line">$(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> page_progress = <span class="built_in">Math</span>.round(<span class="keyword">this</span>.pageYOffset/height);</span><br><span class="line">    page_progress = <span class="built_in">Math</span>.min(page_progress, max_pages);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (page_progress &gt; num_pages_travelled) &#123;</span><br><span class="line">        num_pages_travelled++;</span><br><span class="line">        <span class="keyword">let</span> next = $(slides[num_pages_travelled].current);</span><br><span class="line">        next.addClass(<span class="string">'active'</span>).removeClass(<span class="string">'inactive'</span>);</span><br><span class="line">        </span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (page_progress &lt; num_pages_travelled) &#123;</span><br><span class="line">        <span class="keyword">let</span> past = $(slides[num_pages_travelled].current);</span><br><span class="line">        past.removeClass(<span class="string">'active'</span>).addClass(<span class="string">'inactive'</span>);</span><br><span class="line">        num_pages_travelled--;          </span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="Image-Transitions"><a href="#Image-Transitions" class="headerlink" title="Image Transitions"></a>Image Transitions</h3><p>I used CSS animations and keyframes to animate fade in and fade out tranisitons by altering opacity of the images.</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.active</span> &#123;</span><br><span class="line">    .page__image &#123;</span><br><span class="line">        <span class="selector-tag">animation</span>: <span class="selector-tag">fadeIn</span> 0<span class="selector-class">.4s</span> <span class="selector-tag">ease</span> <span class="selector-tag">both</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.inactive</span> &#123;</span><br><span class="line">    .page__image &#123;</span><br><span class="line">        <span class="selector-tag">animation</span>: <span class="selector-tag">fadeOut</span> 0<span class="selector-class">.4s</span> <span class="selector-tag">ease</span> <span class="selector-tag">both</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> fadeIn &#123;</span><br><span class="line">   0% &#123;<span class="attribute">opacity</span>:<span class="number">0</span>;&#125;</span><br><span class="line">   50% &#123;<span class="attribute">opacity</span>:<span class="number">0.5</span>;&#125;</span><br><span class="line">   100% &#123;<span class="attribute">opacity</span>:<span class="number">1</span>;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> fadeOut &#123;</span><br><span class="line">   0% &#123;<span class="attribute">opacity</span>:<span class="number">1</span>;&#125;</span><br><span class="line">   50% &#123;<span class="attribute">opacity</span>:<span class="number">0.5</span>;&#125;</span><br><span class="line">   100% &#123;<span class="attribute">opacity</span>:<span class="number">0</span>;&#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The animation is applied on classes which would be added or removed on the HTML elements using jQuery.</p>
<h3 id="Responsiveness"><a href="#Responsiveness" class="headerlink" title="Responsiveness"></a>Responsiveness</h3><p>Add media query at the 767/768 breakpoint! So now the image and text both take up 100% width and the text is placed at the top. It has a nice scrolling/parallax effect that was kind of unintended hehe.</p>
<h3 id="Image-Resizing"><a href="#Image-Resizing" class="headerlink" title="Image Resizing"></a>Image Resizing</h3><p>My images were taken with a semi-good camera. The dimensions were like ranging from 2000 pixels x 1000 pixels. Granted, the loading speed for images was so high it took too long to load the page.</p>
<img src="/2018/05/20/2018-5-da-nang/007.JPG" class="" title="demo image">
<p>It took 7 seconds (LOL so embarrassed). I had the website up and the scrolling up, I was very proud already. Then come optimizing which is something equally important. We all understand that people on the web can be so impatient and its important to serve files quickly. Thankfully there were two easy remedies:</p>
<ol>
<li>I used gulp library <code>gulp-imagemin</code> to help me optimize my images. However, the size of images dropped by 10% at most.</li>
<li><p>Thanks to Jiayu, I used Imagick to convert and resize the images using the command <code>convert *.jgp -resize 700x700</code>. It was super effective! Image size dropped by 90% and the resolution didn’t affect the quality of the image much because the image was rendering at a smaller size by the browser anyway.</p>
</li>
<li><p>For exploration next time: the use of <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Img" target="_blank" rel="noopener">srcset</a> attribute in <img> to load different assets based on the different screen resolutions.</p>
</li>
</ol>
<p>It took about 1.5s in the new page load! Ok not that fantastic but yay! It does motivate people to do more :)</p>
<img src="/2018/05/20/2018-5-da-nang/008.JPG" class="" title="demo image">
<h3 id="Final-Words"><a href="#Final-Words" class="headerlink" title="Final Words"></a>Final Words</h3><p>IM GLAD I GOT IT OUT. Check out the <a href="https://github.com/kohrongying/danang" target="_blank" rel="noopener">repo</a>?</p>
</div><div class="tags"><a class="tag-link" href="/tags/javascript/" rel="tag">javascript</a></div></section></div><div class="container"><ul class="nav"><li>Another one:<a href="/2018/12/01/remark/">Remark JS</a></li><li>Previous one:<a href="/2017/11/05/css-images/">Pure CSS Images</a></li></ul></div><div id="backToTop"><div class="back-arrow back-arrow-left"></div><div class="back-arrow back-arrow-right"></div></div><footer class="container"><div class="rights"><span>Powered by </span><a href="http://hexo.io" target="_blank">Hexo</a><span>, Theme </span><a href="https://github.com/gary-Shen/hexo-theme-curry" target="_blank">Curry</a><span>.</span></div></footer>
<script src="/script/jquery.min.js"></script>

<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

<script src="/fancybox/jquery.fancybox.pack.js"></script>

<script src="/script/index.js"></script>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-109820124-3', 'auto');
ga('send', 'pageview');</script>
<script src="/script/jquery.min.js"></script>

<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

<script src="/fancybox/jquery.fancybox.pack.js"></script>

<script src="/script/index.js"></script>

<script src="/script/post.js"></script>
</body></html>