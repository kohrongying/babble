<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="description"><meta name="keyword"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Remark JS</title><link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon"><link href="/styles/site.css" rel="stylesheet"><meta name="generator" content="Hexo 4.2.1"></head><body><header class="container" id="header"><div class="header"><div class="header-left"><div class="avatar"><img src="/images/avatar.jpeg"></div><div class="author"><div class="author-name"><a href="/">rongying</a></div><div class="about-me">just a plebeian</div></div></div><div class="header-right"><ul class="navigation"><li><a href="archives">Archives</a></li></ul></div><div class="about-me-mask"><div class="about-me-wrap"><div class="about-me__header"><div class="avatar"><img src="/images/avatar.jpeg"></div></div><ul class="socials"><li class="social-item"><span class="label"><img src="/images/socials/github.svg" alt="https://github.com/kohrongying"></span><a href="https://github.com/kohrongying" target="_blank" title="https://github.com/kohrongying">https://github.com/kohrongying</a></li><li class="social-item"><span class="label"><img src="/images/socials/email.svg" alt="kohrongying@gmail.com"></span><span>kohrongying@gmail.com</span></li></ul></div></div></div></header><div class="container post"><section class="article"><div class="title">Remark JS</div><div class="date">2018-12-01</div><div class="content"><h2 id="tldr"><a href="#tldr" class="headerlink" title="tldr;"></a>tldr;</h2><ul>
<li><a href="https://github.com/gnab/remark" target="_blank" rel="noopener">Remark.js</a> for converting markdown to presentation slides in html<a id="more"></a></li>
<li><a href="https://github.com/robinmoisson/staticrypt" target="_blank" rel="noopener">StatiCrypt</a> to protect a static page with a password using encryption</li>
<li>Change your hidden file extension to <code>index?.html</code> to hide it from being rendered while having it checked into your version control.</li>
</ul>
<h2 id="Hello"><a href="#Hello" class="headerlink" title="Hello."></a>Hello.</h2><p>The funny thing was that this post, or rather this blog, would not have been created if not for a presentation that we created using markdown and javascript and needed to be hosted somewhere. Our company utilises bitbucket for their endless supply of private/public repositories that fit our nice small team of 3. Since all of our repositories are there, we explored using bitbucket pages to host our static presentation page.</p>
<p>So more about the presentation! We were one week away from our retreat and we all sat down and thought about what to present. One of us had opened up Google Slides initially (Google can sponsor? Haha no.) but somehow we decided to go against the tides and do something unconventional. We wanted to write in markdown.</p>
<p>In comes <a href="https://github.com/gnab/remark" target="_blank" rel="noopener">RemarkJs</a>. </p>
<h2 id="RemarkJs"><a href="#RemarkJs" class="headerlink" title="RemarkJs"></a>RemarkJs</h2><p>It is a simple, in-browser slideshow tool, that converts your markdown into slides. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class: center, middle</span><br><span class="line"></span><br><span class="line"># Hello</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;remarkjs.com&#x2F;downloads&#x2F;remark-latest.min.js&quot;&gt;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var slideshow &#x3D; remark.create();</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<p>This would have transformed it into a slide on the browser. Awesome. You could also configure it to give you different slide dimensions, set templates, set a layout for all slides to follow, add background images.</p>
<p>Another cool thing was the presentation mode:</p>
<ul>
<li>Type <code>c</code> to duplicate the screen</li>
<li>Type <code>p</code> for presenter mode (you have notes!)</li>
</ul>
<h3 id="The-painful"><a href="#The-painful" class="headerlink" title="The painful"></a>The painful</h3><p>Of course it wasn’t always rainbows and butterflies. There was a slide where we needed a 1 x 3 layout and we had to revert to html to write it. But luckily we were able to write html within the markdown. </p>
<p>So it doesn’t come as a surprise when you should only use such tools when your presentation is minimal and not image fancy. </p>
<p>So, we deployed our index.html file to bitbucket. (Quick Tip: Rename your repo to be your team name. eg. xx.bitbucket.io) and head to <a href="https://xx.bitbucket.io" target="_blank" rel="noopener">https://xx.bitbucket.io</a> and you would see your slides there.</p>
<p><img src="https://media.giphy.com/media/3o7TKsxv7GtONck2VG/giphy.gif" alt="Sian"></p>
<p>Yay! But wait.</p>
<p>We are kiasu Singaporeans. And we wanted our slides to remain confidential. Bitbucket’s website writes that: <code>[even] if your Bitbucket repository is private, users can still visit and view the static website.</code></p>
<h2 id="StatiCrypt"><a href="#StatiCrypt" class="headerlink" title="StatiCrypt"></a>StatiCrypt</h2><p>We considered some options:</p>
<ol>
<li>A server-side authentication using password<ul>
<li>Pro: Simple Logic</li>
<li>Con: Server side meant moving away from static sites and having to provision an endpoint, which is more work. </li>
</ul>
</li>
<li>A client-side authentication with password<ul>
<li>Con: Defeats the purpose as plain-text password stored in the static js files can be displayed easily</li>
</ul>
</li>
</ol>
<p><a href="https://github.com/robinmoisson/staticrypt" target="_blank" rel="noopener">StatiCrypt</a> solves our use case quite wonderfully. </p>
<h2 id="Almost-as-fast-as-a-hare"><a href="#Almost-as-fast-as-a-hare" class="headerlink" title="(Almost) as fast as a hare"></a>(Almost) as fast as a hare</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g staticrypt</span><br><span class="line">staticrypt index.html mysecretpassword</span><br></pre></td></tr></table></figure>
<img src="/2018/12/01/remark/static-site-1.png" class="" title="static-crypt image">
<p>The <code>index_encrypted.html</code> file created will have its contents encrypted using AES-256. When you open <code>index_encrypted.html</code> locally, you’ll be prompted to enter a passphrase. Upon correct entry, you’ll be granted access to the index.html file! </p>
<p>Remember to rename the encrypted file to <code>index.html</code> so that the encrypted file will be the one rendered on bitbucket. Now the question is, what do we do / rename the original, unencrypted <code>index.html</code> file to?</p>
<p>If we rename it to any other name like <code>whyareindexfilescalledindex.html</code> or <code>whynothome.html</code>, we realised that we would be able to still navigate to that html. Which is not encrypted! Which means we encrypted it for nothing!! </p>
<p>Even if we changed the file extension to <code>index.abc</code>, but we could still see our unencrypted contents! </p>
<p><img src="https://media.giphy.com/media/11V3dAPYzVNP8s/giphy.gif" alt="Security"></p>
<h2 id="Changing-file-extensions"><a href="#Changing-file-extensions" class="headerlink" title="Changing file extensions"></a>Changing file extensions</h2><p>We came up with the idea of changing the file name to <code>index?.html</code>. And it worked! Going to <code>/index?.html</code> gave us a <code>File not found</code> error message. Our guess is that the question mark is used as a separator before the query parameter. Yay. Simple hack. </p>
<p>Of course, if we didn’t want it rendered, we could have just removed it from version control (added it to <code>.gitignore</code>. But how are we going to share the file? Email? <code>.env</code>? We were really clueless here haha.) So that was what gave birth to that hack.</p>
<p>Okay. So that’s it. It was a fun Friday. Till next time.</p>
</div><div class="tags"><a class="tag-link" href="/tags/javascript/" rel="tag">javascript</a><a class="tag-link" href="/tags/remarkjs/" rel="tag">remarkjs</a><a class="tag-link" href="/tags/staticrypt/" rel="tag">staticrypt</a></div></section></div><div class="container"><ul class="nav"><li>Another one:<a href="/2018/12/22/dockerize-flask-part-one/">Learning Docker [Part 1]</a></li><li>Previous one:<a href="/2018/05/20/2018-5-da-nang/">Da Nang</a></li></ul></div><div id="backToTop"><div class="back-arrow back-arrow-left"></div><div class="back-arrow back-arrow-right"></div></div><footer class="container"><div class="rights"><span>Powered by </span><a href="http://hexo.io" target="_blank">Hexo</a><span>, Theme </span><a href="https://github.com/gary-Shen/hexo-theme-curry" target="_blank">Curry</a><span>.</span></div></footer>
<script src="/script/jquery.min.js"></script>

<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

<script src="/fancybox/jquery.fancybox.pack.js"></script>

<script src="/script/index.js"></script>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-109820124-3', 'auto');
ga('send', 'pageview');</script>
<script src="/script/jquery.min.js"></script>

<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

<script src="/fancybox/jquery.fancybox.pack.js"></script>

<script src="/script/index.js"></script>

<script src="/script/post.js"></script>
</body></html>